<!DOCTYPE html>
<html lang="es">
<head>
    <!-- Configuración básica del documento -->
    <meta charset="UTF-8"> <!-- Codificación de caracteres para español -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- Responsive design -->
    <title>Encuesta de Satisfacción de TI</title> <!-- Título de la pestaña -->
    <link rel="stylesheet" href="styles.css"> <!-- Hoja de estilos principal -->
</head>
<body>
    <!-- ============================================= -->
    <!-- CONTENIDO PRINCIPAL (visible para todos) -->
    <!-- ============================================= -->
    
    <!-- Contenedor principal de la aplicación -->
    <div id="mainContent" class="container">
        <!-- Título principal -->
        <h1>Encuesta de Satisfacción de TI</h1>
        <!-- Subtítulo descriptivo -->
        <p class="subtitle">Tu opinión nos ayuda a mejorar nuestro servicio</p>
        
        <!-- ============================================= -->
        <!-- BOTÓN DE ACCESO ADMIN -->
        <!-- ============================================= -->
        
        <!-- Sección de acceso administrativo - solo visible sin sesión -->
        <div id="adminAccess" class="admin-access-section">
            <!-- Botón que activa el modal de login -->
            <button onclick="mostrarLogin()" class="admin-btn">🔐 Acceso Administración</button>
        </div>
        
        <!-- ============================================= -->
        <!-- FORMULARIO PRINCIPAL DE ENCUESTA -->
        <!-- ============================================= -->
        
        <!-- Formulario con ID para manejo en JavaScript -->
        <form id="encuestaForm">
            <!-- Grupo 1: Nombre del usuario -->
            <div class="form-group">
                <label for="nombre">Nombre del usuario <span class="required">*</span></label>
                <!-- Campo obligatorio para nombre -->
                <input type="text" id="nombre" required placeholder="Ingresa tu nombre completo">
                <!-- Mensaje de error específico -->
                <div id="nombreError" class="error-message">Por favor ingresa tu nombre</div>
            </div>
            
            <!-- Grupo 2: Selección de técnico -->
            <div class="form-group">
                <label for="atendio">¿Quién le atendió? <span class="required">*</span></label>
                <!-- Dropdown con los técnicos disponibles -->
                <select id="atendio" required>
                    <option value="">Seleccione quien le atendió</option>
                    <option value="Roberto">Roberto</option>
                    <option value="Chantely">Chantely</option>
                    <option value="David">David</option>
                </select>
                <div id="atendioError" class="error-message">Por favor selecciona quien te atendió</div>
            </div>
            
            <!-- Grupo 3: Descripción de la falla -->
            <div class="form-group">
                <label for="falla">¿Qué fue lo que falló? <span class="required">*</span></label>
                <!-- Campo para describir la falla con placeholder guía -->
                <input type="text" id="falla" required placeholder="Describe específicamente qué falló (ej: Mi computadora no enciende, el WiFi está lento, etc.)">
                <div id="fallaError" class="error-message">Por favor describe qué falló</div>
                <!-- Sección de sugerencias predefinidas -->
                <div class="suggestions">
                    <strong>Ejemplos comunes:</strong>
                    <!-- Tags clickeables que insertan texto en el campo -->
                    <span class="suggestion-tag" onclick="insertSuggestion('La computadora no enciende')">Computadora no enciende</span>
                    <span class="suggestion-tag" onclick="insertSuggestion('El WiFi está muy lento')">WiFi lento</span>
                    <span class="suggestion-tag" onclick="insertSuggestion('No puedo abrir Word')">Word no abre</span>
                    <span class="suggestion-tag" onclick="insertSuggestion('La impresora no funciona')">Impresora no funciona</span>
                    <span class="suggestion-tag" onclick="insertSuggestion('Error con remision')">Error con remision</span>
                    <span class="suggestion-tag" onclick="insertSuggestion('Error con factura')">Error con factura</span>
                    <span class="suggestion-tag" onclick="insertSuggestion('Correccion de documento')">Correccion de documento</span>
                </div>
            </div>
            
            <!-- Grupo 4: Calificación de soporte técnico -->
            <div class="form-group">
                <label>1. ¿Cómo califica el soporte técnico recibido? <span class="required">*</span></label>
                <!-- Sistema de rating con radio buttons personalizados -->
                <div class="rating">
                    <div class="rating-option">
                        <input type="radio" id="soporte1" name="soporte" value="1" required>
                        <label for="soporte1">1<br><small>Muy malo</small></label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="soporte2" name="soporte" value="2">
                        <label for="soporte2">2<br><small>Malo</small></label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="soporte3" name="soporte" value="3">
                        <label for="soporte3">3<br><small>Regular</small></label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="soporte4" name="soporte" value="4">
                        <label for="soporte4">4<br><small>Bueno</small></label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="soporte5" name="soporte" value="5">
                        <label for="soporte5">5<br><small>Excelente</small></label>
                    </div>
                </div>
                <div id="soporteError" class="error-message">Por favor selecciona una calificación</div>
            </div>
            
            <!-- Grupo 5: Resolución del problema -->
            <div class="form-group">
                <label for="resuelto">2. ¿El problema fue resuelto satisfactoriamente? <span class="required">*</span></label>
                <!-- Dropdown con opciones de resolución -->
                <select id="resuelto" required>
                    <option value="">Seleccione una opción</option>
                    <option value="Sí">Sí, completamente</option>
                    <option value="Parcialmente">Parcialmente</option>
                    <option value="No">No, no se resolvió</option>
                </select>
                <div id="resueltoError" class="error-message">Por favor selecciona una opción</div>
            </div>
            
            <!-- Grupo 6: Calificación del tiempo de respuesta -->
            <div class="form-group">
                <label>3. ¿Cómo califica el tiempo de respuesta del equipo de TI? <span class="required">*</span></label>
                <!-- Segundo sistema de rating para tiempo -->
                <div class="rating">
                    <div class="rating-option">
                        <input type="radio" id="tiempo1" name="tiempo" value="1" required>
                        <label for="tiempo1">1<br><small>Muy lento</small></label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="tiempo2" name="tiempo" value="2">
                        <label for="tiempo2">2<br><small>Lento</small></label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="tiempo3" name="tiempo" value="3">
                        <label for="tiempo3">3<br><small>Aceptable</small></label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="tiempo4" name="tiempo" value="4">
                        <label for="tiempo4">4<br><small>Rápido</small></label>
                    </div>
                    <div class="rating-option">
                        <input type="radio" id="tiempo5" name="tiempo" value="5">
                        <label for="tiempo5">5<br><small>Muy rápido</small></label>
                    </div>
                </div>
                <div id="tiempoError" class="error-message">Por favor selecciona una calificación</div>
            </div>
            
            <!-- Grupo 7: Comentarios adicionales (opcional) -->
            <div class="form-group">
                <label for="comentarios">4. Comentarios adicionales (opcional)</label>
                <!-- Textarea para comentarios libres -->
                <textarea id="comentarios" rows="4" placeholder="Escribe aquí tus comentarios, sugerencias o observaciones adicionales..."></textarea>
            </div>
            
            <!-- Botón de envío del formulario -->
            <button type="submit">Enviar Encuesta</button>
        </form>
        
        <!-- Mensaje de éxito (oculto por defecto) -->
        <div id="successMessage" class="success-message">
            Encuesta enviada exitosamente
        </div>
    </div>

    <!-- ============================================= -->
    <!-- MODAL DE LOGIN (oculto inicialmente) -->
    <!-- ============================================= -->
    
    <div id="loginScreen" class="login-container" style="display: none;">
        <div class="login-form">
            <h2>Acceso al Sistema de Administración</h2>
            <!-- Campo de usuario -->
            <div class="form-group">
                <label for="username">Usuario:</label>
                <input type="text" id="username" placeholder="Ingrese su usuario">
            </div>
            <!-- Campo de contraseña -->
            <div class="form-group">
                <label for="password">Contraseña:</label>
                <input type="password" id="password" placeholder="Ingrese su contraseña">
            </div>
            <!-- Botones de acción del login -->
            <div class="login-buttons">
                <button onclick="validarLogin()">Ingresar</button>
                <button onclick="ocultarLogin()" class="cancel-btn">Cancelar</button>
            </div>
            <!-- Mensaje de error del login -->
            <div id="loginError" class="error-message"></div>
            <!-- Información adicional -->
            <div class="login-info">
                <p>Por favor contactar con el equipo de IT si necesita acceso al historial de encuestas.</p>
            </div>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- PANEL DE ADMINISTRACIÓN (oculto inicialmente) -->
    <!-- ============================================= -->
    
    <div id="adminPanel" class="admin-panel" style="display: none;">
        <div class="panel-content">
            <!-- Header del panel con título y botón cerrar -->
            <div class="panel-header">
                <h2>Administración de Encuestas</h2>
                <button onclick="cerrarSesion()" class="logout-btn">Cerrar Sesión</button>
            </div>
            
            <!-- Primera fila de estadísticas generales -->
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="totalEncuestas">0</div>
                    <div class="stat-label">Total de encuestas</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="promedioSoporte">0</div>
                    <div class="stat-label">Calificación promedio</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="problemasResueltos">0%</div>
                    <div class="stat-label">Problemas resueltos</div>
                </div>
            </div>
            
            <!-- Segunda fila de estadísticas por técnico -->
            <div class="stats">
                <div class="stat-item">
                    <div class="stat-value" id="encuestasRoberto">0</div>
                    <div class="stat-label">Encuestas - Roberto</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="encuestasChantely">0</div>
                    <div class="stat-label">Encuestas - Chantely</div>
                </div>
                <div class="stat-item">
                    <div class="stat-value" id="encuestasDavid">0</div>
                    <div class="stat-label">Encuestas - David</div>
                </div>
            </div>
            
            <!-- ============================================= -->
            <!-- CONTADOR DE ALMACENAMIENTO -->
            <!-- ============================================= -->
            
            <div class="storage-counter">
                <h4>Uso de Almacenamiento</h4>
                <!-- Barra de progreso visual -->
                <div class="storage-bar">
                    <div class="storage-fill" id="storageFill"></div>
                </div>
                <!-- Información textual del almacenamiento -->
                <div class="storage-info">
                    <span id="storageUsed">0 KB usados</span>
                    <span id="storageRemaining">Restan: 0 encuestas</span>
                </div>
            </div>
            
            <!-- ============================================= -->
            <!-- SISTEMA DE PESTAÑAS -->
            <!-- ============================================= -->
            
            <div class="tabs">
                <!-- Botones de pestañas -->
                <button class="tab-button active" onclick="abrirTab(event, 'tabEstadisticas')">Estadísticas</button>
                <button class="tab-button" onclick="abrirTab(event, 'tabGraficas')">Gráficas</button>
            </div>
            
            <!-- ============================================= -->
            <!-- CONTENIDO DE PESTAÑAS -->
            <!-- ============================================= -->
            
            <!-- Pestaña 1: Estadísticas y acciones -->
            <div id="tabEstadisticas" class="tab-content active">
                <div class="action-buttons">
                    <!-- Botón para descargar Excel -->
                    <button onclick="descargarExcelCompleto()" class="download-btn">📥 Descargar Encuestas (Excel)</button>
                    <!-- Botón para reiniciar datos -->
                    <button onclick="reiniciarEncuestas()" class="reset-btn">🔄 Reiniciar Encuestas</button>
                </div>
            </div>
            
            <!-- Pestaña 2: Gráficas estadísticas -->
            <div id="tabGraficas" class="tab-content">
                <div class="charts-container">
                    <!-- Gráfica 1: Calificación de soporte -->
                    <div class="chart-item">
                        <h4>Calificación del Soporte Técnico</h4>
                        <canvas id="chartSoporte"></canvas>
                    </div>
                    <!-- Gráfica 2: Tiempo de respuesta -->
                    <div class="chart-item">
                        <h4>Tiempo de Respuesta</h4>
                        <canvas id="chartTiempo"></canvas>
                    </div>
                    <!-- Gráfica 3: Resolución de problemas -->
                    <div class="chart-item">
                        <h4>Resolución de Problemas</h4>
                        <canvas id="chartResolucion"></canvas>
                    </div>
                    <!-- Gráfica 4: Distribución por técnico -->
                    <div class="chart-item">
                        <h4>Distribución por Técnico</h4>
                        <canvas id="chartTecnicos"></canvas>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- ============================================= -->
    <!-- FOOTER Y CRÉDITOS -->
    <!-- ============================================= -->
    
    <footer style="text-align: center; margin-top: 30px; padding: 20px; color: #7f8c8d; font-size: 0.9em; border-top: 1px solid #eee;">
        <p>Creado por el equipo de IT</p>
        <p>
            <a href="mailto:sistemasuniversal@unixel.com.mx" style="color: #3498db; text-decoration: none;">sistemasuniversal@unixel.com.mx</a> | 
            <a href="mailto:soporteuniversal@unixel.com.mx" style="color: #3498db; text-decoration: none;">soporteuniversal@unixel.com.mx</a>
        </p>
        <p style="margin-top: 10px; font-size: 0.8em;">
            &copy; 2025 ERICK DAVID PEREZ OROPEZA. Todos los derechos reservados.
        </p>
    </footer>

    <!-- ============================================= -->
    <!-- DEPENDENCIAS EXTERNAS -->
    <!-- ============================================= -->
    
    <!-- SheetJS para exportación a Excel -->
    <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
    <!-- Chart.js para gráficos interactivos -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- Lógica principal de la aplicación -->
    <script src="script.js"></script>
</body>
</html>
